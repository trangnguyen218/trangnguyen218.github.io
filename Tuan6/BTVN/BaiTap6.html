<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Anh h√πng di·ªát R·ªìng</title>
  <style>
    *{
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", system-ui, sans-serif;
    }
    body{
      min-height: 100vh;
      background: radial-gradient(circle at top,#243b55,#141e30);
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
    }
    .battle-card{
      width: 100%;
      max-width: 900px;
      background: rgba(0,0,0,.4);
      border-radius: 24px;
      padding: 24px 28px;
      box-shadow: 0 20px 40px rgba(0,0,0,.6);
    }
    .battle-header{
      text-align:center;
      margin-bottom:18px;
    }
    .battle-header h1{
      font-size:26px;
      margin-bottom:4px;
      letter-spacing:1px;
    }
    .battle-header span{
      font-size:13px;
      color:#ccc;
    }
    .arena{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:20px;
      margin-bottom:18px;
    }
    .fighter{
      flex:1;
      text-align:center;
      position:relative;
    }
    .fighter-name{
      font-weight:bold;
      margin-bottom:6px;
      letter-spacing:1px;
    }
    .avatar{
      width:150px;
      height:150px;
      border-radius:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:70px;
      margin:0 auto 10px;
      background:linear-gradient(135deg,rgba(255,255,255,.16),rgba(255,255,255,.02));
      border:2px solid rgba(255,255,255,.25);
      box-shadow:0 10px 25px rgba(0,0,0,.6);
    }
    .stats{
      font-size:12px;
      color:#ddd;
      margin-bottom:8px;
    }
    .hp-bar{
      width:100%;
      height:16px;
      border-radius:999px;
      background:rgba(0,0,0,.45);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.2);
    }
    .hp-fill{
      height:100%;
      width:100%;
      transition:width .25s;
    }
    .hp-hero{ background:linear-gradient(90deg,#6ef195,#35d37e); }
    .hp-dragon{ background:linear-gradient(90deg,#ff6363,#ff2e63); }

    .vs-label{
      font-size:26px;
      margin-bottom:80px;
      font-weight:bold;
      color:#ffea7a;
      text-shadow:0 0 8px rgba(0,0,0,.7);
    }

    .controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:14px;
      gap:10px;
      flex-wrap:wrap;
    }
    .buttons{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      border:none;
      padding:10px 22px;
      border-radius:999px;
      cursor:pointer;
      font-size:14px;
      font-weight:500;
      letter-spacing:.5px;
      transition:transform .15s, box-shadow .15s, background .15s;
    }
    #btnTurn{
      background:#ffb703;
      color:#222;
      box-shadow:0 8px 18px rgba(0,0,0,.4);
    }
    #btnTurn:hover{
      transform:translateY(-2px);
      box-shadow:0 10px 24px rgba(0,0,0,.6);
    }
    #btnReset{
      background:#3d5a80;
      color:#fff;
    }
    #btnReset:hover{
      transform:translateY(-2px);
      box-shadow:0 8px 18px rgba(0,0,0,.5);
    }
    .status{
      font-size:13px;
      color:#eee;
    }
    .log{
      background:rgba(0,0,0,.6);
      border-radius:14px;
      padding:10px 12px;
      max-height:220px;
      overflow-y:auto;
      font-size:12px;
    }
    .log-entry{
      margin-bottom:6px;
      line-height:1.3;
    }
    .log-entry.hero{ color:#9be7ff; }
    .log-entry.dragon{ color:#ff9b9b; }
    .log-entry.system{ color:#ffeaa7; }

    /* hi·ªáu ·ª©ng khi tr√∫ng ƒë√≤n / n√© */
    .hit{
      animation: hit .3s;
    }
    @keyframes hit{
      0%{ transform:translateX(0); }
      20%{ transform:translateX(-8px); }
      40%{ transform:translateX(8px); }
      60%{ transform:translateX(-4px); }
      80%{ transform:translateX(4px); }
      100%{ transform:translateX(0); }
    }
    .dodge{
      animation: dodge .35s;
    }
    @keyframes dodge{
      0%{ transform:translateY(0); opacity:1; }
      50%{ transform:translateY(-14px); opacity:.6; }
      100%{ transform:translateY(0); opacity:1; }
    }
  </style>
</head>
<body>

<div class="battle-card">
  <div class="battle-header">
    <h1>TR·∫¨N CHI·∫æN ANH H√ôNG ‚Äì DI·ªÜT R·ªíNG</h1>
    <span>Hero t·∫•n c√¥ng tr∆∞·ªõc, r·ªìng ph·∫£n c√¥ng sau. N√© ƒë√≤n, ch√≠ m·∫°ng, t·∫•t c·∫£ do s·ªë ph·∫≠n (Math.random) quy·∫øt ƒë·ªãnh!</span>
  </div>

  <div class="arena">
    <!-- Anh h√πng -->
    <div class="fighter" id="heroBox">
      <div class="fighter-name">ANH H√ôNG</div>
      <div class="avatar">üó°Ô∏è</div>
      <div class="stats" id="heroStats"></div>
      <div class="hp-bar">
        <div class="hp-fill hp-hero" id="heroHpFill"></div>
      </div>
      <div class="stats" id="heroHpText"></div>
    </div>

    <div class="vs-label">VS</div>

    <!-- R·ªìng -->
    <div class="fighter" id="dragonBox">
      <div class="fighter-name">H·ªéA LONG</div>
      <div class="avatar">üêâ</div>
      <div class="stats" id="dragonStats"></div>
      <div class="hp-bar">
        <div class="hp-fill hp-dragon" id="dragonHpFill"></div>
      </div>
      <div class="stats" id="dragonHpText"></div>
    </div>
  </div>

  <div class="controls">
    <div class="buttons">
      <button id="btnTurn">RA ƒê√íN!</button>
      <button id="btnReset">Ch∆°i l·∫°i</button>
    </div>
    <div class="status" id="statusText">Nh·∫•n "RA ƒê√íN!" ƒë·ªÉ b·∫Øt ƒë·∫ßu hi·ªáp ƒë·∫•u.</div>
  </div>

  <div class="log" id="logBox"></div>
</div>

<script>
  // ====== THU·ªòC T√çNH NH√ÇN V·∫¨T ======
  let maxHeroHp   = 120;
  let maxDragonHp = 150;

  let health, dragonHealth;
  let strength, dragonStr;
  let agility, dragonAgi;
  let intel, dragonInt;

  let gameContinue = true;

  function initStats(){
    health       = maxHeroHp;
    dragonHealth = maxDragonHp;

    strength  = 25;   // s√°t th∆∞∆°ng hero
    dragonStr = 20;   // s√°t th∆∞∆°ng r·ªìng

    agility   = 35;   // % n√© c·ªßa hero
    dragonAgi = 25;   // % n√© c·ªßa r·ªìng

    intel     = 30;   // % ch√≠ m·∫°ng hero
    dragonInt = 25;   // % ch√≠ m·∫°ng r·ªìng

    gameContinue = true;
    document.getElementById("statusText").innerText =
      "Nh·∫•n \"RA ƒê√íN!\" ƒë·ªÉ b·∫Øt ƒë·∫ßu hi·ªáp ƒë·∫•u.";
    document.getElementById("btnTurn").disabled = false;
    clearLog();
    logSystem("Tr·∫≠n chi·∫øn b·∫Øt ƒë·∫ßu! Anh H√πng ra ƒë√≤n tr∆∞·ªõc.");
    updateUI();
  }

  function updateUI(){
    // Stats text
    document.getElementById("heroStats").innerText =
      "STR " + strength + " | AGI " + agility + " | INT " + intel;
    document.getElementById("dragonStats").innerText =
      "STR " + dragonStr + " | AGI " + dragonAgi + " | INT " + dragonInt;

    // HP
    document.getElementById("heroHpText").innerText   =
      "M√°u: " + Math.max(0,health) + "/" + maxHeroHp;
    document.getElementById("dragonHpText").innerText =
      "M√°u: " + Math.max(0,dragonHealth) + "/" + maxDragonHp;

    const heroPercent   = Math.max(0, health) / maxHeroHp   * 100;
    const dragonPercent = Math.max(0, dragonHealth) / maxDragonHp * 100;

    document.getElementById("heroHpFill").style.width   = heroPercent + "%";
    document.getElementById("dragonHpFill").style.width = dragonPercent + "%";
  }

  function log(msg, who){
    const box = document.getElementById("logBox");
    const div = document.createElement("div");
    div.className = "log-entry " + (who || "system");
    div.textContent = msg;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
  }
  function logHero(msg){ log(msg,"hero"); }
  function logDragon(msg){ log(msg,"dragon"); }
  function logSystem(msg){ log("‚òÖ " + msg,"system"); }
  function clearLog(){
    document.getElementById("logBox").innerHTML = "";
  }

  function animateOnce(elemId, cls){
    const el = document.getElementById(elemId);
    el.classList.remove(cls);
    void el.offsetWidth; // force reflow
    el.classList.add(cls);
    setTimeout(()=>{ el.classList.remove(cls); }, 350);
  }

  // ====== 1 HI·ªÜP ƒê√ÅNH  ======
  function playTurn(){
    if (!gameContinue) return;

    document.getElementById("statusText").innerText =
      "Hi·ªáp ƒë·∫•u ƒëang di·ªÖn ra...";

    // --- Anh h√πng t·∫•n c√¥ng ---
    let heroHit = Math.random() * 100 > dragonAgi; // r·ªìng n√© n·∫øu random < dragonAgi
    if (heroHit){
      dragonHealth -= strength;
      animateOnce("dragonBox","hit");
      logHero("TR·∫¢M LONG! B·∫°n g√¢y " + strength + " s√°t th∆∞∆°ng cho R·ªìng.");
      // ch√≠ m·∫°ng hero
      let heroCritical = Math.random() * 100 < intel;
      if (heroCritical){
        let extra = strength * 2;
        dragonHealth -= extra;
        logHero("‚ö° CH√ç M·∫†NG! B·∫°n g√¢y th√™m " + extra + " s√°t th∆∞∆°ng!");
      }
    }else{
      animateOnce("dragonBox","dodge");
      logHero("X√ç H·ª§T! R·ªìng ƒë√£ l∆∞·ª£n tr√°nh ƒë∆∞·ª£c ƒë√≤n t·∫•n c√¥ng c·ªßa b·∫°n.");
    }

    updateUI();

    // Ki·ªÉm tra r·ªìng ch·∫øt ch∆∞a
    if (dragonHealth <= 0){
      dragonHealth = 0;
      updateUI();
      gameContinue = false;
      document.getElementById("btnTurn").disabled = true;
      logSystem("BATTLE WON! B·∫°n ƒë√£ h·∫° g·ª•c H·ªèa Long v√† tr·ªü th√†nh D≈©ng sƒ© di·ªát R·ªìng!");
      alert("CHI·∫æN TH·∫ÆNG!!! Ch√∫c m·ª´ng b·∫°n ƒë√£ chi·∫øn th·∫Øng!!!");
      document.getElementById("statusText").innerText = "B·∫°n ƒë√£ chi·∫øn th·∫Øng!";
      return;
    }

    // --- R·ªìng t·∫•n c√¥ng ---
    let dragonHit = Math.random() * 100 > agility; // hero n√© n·∫øu random < agility
    if (dragonHit){
      health -= dragonStr;
      animateOnce("heroBox","hit");
      logDragon("H·ªéA C·∫¶U! R·ªìng g√¢y " + dragonStr + " s√°t th∆∞∆°ng cho b·∫°n.");
      // ch√≠ m·∫°ng r·ªìng
      let dragonCritical = Math.random() * 100 < dragonInt;
      if (dragonCritical){
        let extra = dragonStr * 2;
        health -= extra;
        logDragon("‚ò† CH√ç M·∫†NG! R·ªìng g√¢y th√™m " + extra + " s√°t th∆∞∆°ng!");
      }
    }else{
      animateOnce("heroBox","dodge");
      logDragon("X√ç H·ª§T! B·∫°n ƒë√£ tr√°nh ƒë∆∞·ª£c ƒë√≤n t·∫•n c√¥ng c·ªßa R·ªìng.");
    }

    updateUI();

    // Ki·ªÉm tra anh h√πng c√≤n s·ªëng kh√¥ng
    if (health <= 0){
      health = 0;
      updateUI();
      gameContinue = false;
      document.getElementById("btnTurn").disabled = true;
      logSystem("TH·∫§T B·∫†I! B·∫°n ƒë√£ tr·ªü th√†nh m√≥n hi·ªáp sƒ© n∆∞·ªõng l√° l·ªët trong th·ª±c ƒë∆°n c·ªßa R·ªìng...");
      alert("TH·∫§T B·∫†I!!! Ch√∫c m·ª´ng b·∫°n ƒë√£ c√≥ t√™n tr√™n menu m√≥n t·ªëi c·ªßa R·ªìng: Hi·ªáp sƒ© n∆∞·ªõng l√° l·ªët!");
      document.getElementById("statusText").innerText = "B·∫°n ƒë√£ thua tr·∫≠n...";
      return;
    }

    document.getElementById("statusText").innerText =
      "Hi·ªáp ƒë·∫•u k·∫øt th√∫c. Nh·∫•n \"RA ƒê√íN!\" ƒë·ªÉ ti·∫øp t·ª•c.";
  }

  // ====== S·ª∞ KI·ªÜN N√öT ======
  document.getElementById("btnTurn").addEventListener("click", playTurn);
  document.getElementById("btnReset").addEventListener("click", initStats);

  // Kh·ªüi t·∫°o l·∫ßn ƒë·∫ßu
  initStats();
</script>

</body>
</html>
